<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="generator" content="pandoc">
    <title>Starting out in R</title>
    <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="css/bootstrap/bootstrap-theme.css" />
    <link rel="stylesheet" type="text/css" href="css/swc.css" />
    <meta charset="UTF-8" />
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body class="lesson">
    <div class="container card">
      
      <article>
      <div class="row">
        <div class="col-md-10 col-md-offset-1">
<h1 id="starting-out-in-r">Starting out in R</h1>
<p>R is both a programming language and an interactive environment for statistics. Today we will be concentrating on R as an <em>interactive environment</em>.</p>
<p>Working with R is primarily text-based. The basic mode of use for R is that the user types in a command in the R language and presses enter, and then R computes and displays the result.</p>
<p>We will be working in <a href="https://www.rstudio.com/">RStudio</a>. This surrounds the <em>console</em>, where one enters commands and views the results, with various conveniences. In addition to the console, RStudio provides panels containing:</p>
<ul>
<li>A <em>text editor</em>, where R commands can be recorded for future reference.</li>
<li>A history of commands that have been typed on the console.</li>
<li>A list of <em>variables</em>, which contain values that R has been told to save from previous commands.</li>
<li>A file manager.</li>
<li>Help on the functions available in R.</li>
<li>A panel to show plots (graphs).</li>
</ul>
<p>Open RStudio, click on the “Console” pane, type <code>1+1</code> and press enter. R displays the result of the calculation. In this document, we will be showing such an interaction with R as below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="dv">1+1</span></code></pre></div>
<pre><code>## [1] 2</code></pre>
<p><code>+</code> is called an operator. R has the operators you would expect for for basic mathematics: <code>+</code> <code>-</code> <code>*</code> <code>/</code>. It also has operators that do more obscure things.</p>
<p><code>*</code> has higher precedence than <code>+</code>. We can use brackets if necessary <code>( )</code>. Try <code>1+2*3</code> and <code>(1+2)*3</code>.</p>
<p>Spaces can be used to make code easier to read.</p>
<p>We can compare with <code>== &lt; &gt; &lt;= &gt;=</code>. This produces a “logical” value, <code>TRUE</code> or <code>FALSE</code>. Note the double equals, <code>==</code>, for equality comparison.</p>
<p>There are also character strings such as <code>&quot;string&quot;</code>.</p>
<h2 id="variables">Variables</h2>
<p>A variable is a name for a value, such as <code>x</code>, <code>current_temperature</code>, or <code>subject_id</code>. We can create a new variable by assigning a value to it using <code>&lt;-</code></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weight_kg &lt;-<span class="st"> </span><span class="dv">55</span></code></pre></div>
<p>RStudio helpfully shows us the variable in the “Environment” pane. We can also print it by typing the name of the variable and hitting <code>Enter</code> (or <code>return</code>). In general, R will print to the console any object returned by a function or operation <em>unless</em> we assign it to a variable.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weight_kg</code></pre></div>
<pre><code>## [1] 55</code></pre>
<p>Examples of valid variables names: <code>hello</code>, <code>hello_there</code>, <code>hello.there</code>, <code>value1</code>. Spaces aren’t ok <em>inside</em> variable names. Dots (<code>.</code>) are ok, unlike in many other languages.</p>
<p>We can do arithmetic with the variable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># weight in pounds:</span>
<span class="fl">2.2</span> *<span class="st"> </span>weight_kg</code></pre></div>
<pre><code>## [1] 121</code></pre>
<aside class="callout panel panel-info">
<div class="panel-heading">
<h3 id="tip"><span class="glyphicon glyphicon-pushpin"></span>Tip</h3>
</div>
<div class="panel-body">
<p>We can add comments to our code using the <code>#</code> character. It is useful to document our code in this way so that others (and us the next time we read it) have an easier time following what the code is doing.</p>
</div>
</aside>
<p>We can also change an object’s value by assigning it a new value:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weight_kg &lt;-<span class="st"> </span><span class="fl">57.5</span>
<span class="co"># weight in kilograms is now</span>
weight_kg</code></pre></div>
<pre><code>## [1] 57.5</code></pre>
<p>If we imagine the variable as a sticky note with a name written on it, assignment is like putting the sticky note on a particular value:</p>
<p><img src="fig/python-sticky-note-variables-01.png" alt="Variables as Sticky Notes" /></p>
<p>This means that assigning a value to one object does not change the values of other variables. For example, let’s store the subject’s weight in pounds in a variable:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weight_lb &lt;-<span class="st"> </span><span class="fl">2.2</span> *<span class="st"> </span>weight_kg
<span class="co"># weight in kg...</span>
weight_kg</code></pre></div>
<pre><code>## [1] 57.5</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ...and in pounds</span>
weight_lb</code></pre></div>
<pre><code>## [1] 126.5</code></pre>
<p><img src="fig/python-sticky-note-variables-02.png" alt="Creating Another Variable" /></p>
<p>and then change <code>weight_kg</code>:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">weight_kg &lt;-<span class="st"> </span><span class="fl">100.0</span>
<span class="co"># weight in kg now...</span>
weight_kg</code></pre></div>
<pre><code>## [1] 100</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># ...and weight in pounds still</span>
weight_lb</code></pre></div>
<pre><code>## [1] 126.5</code></pre>
<p><img src="fig/python-sticky-note-variables-03.png" alt="Updating a Variable" /></p>
<p>Since <code>weight_lb</code> doesn’t “remember” where its value came from, it isn’t automatically updated when <code>weight_kg</code> changes. This is different from the way spreadsheets work.</p>
<h2 id="vectors">Vectors</h2>
<p>A vector<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> of numbers is a collection of numbers. We call the individual numbers “elements” of the vector.</p>
<p>We can make vectors with <code>c( )</code>, for example <code>c(1,2,3)</code>, and do maths to them. <code>c</code> means “combine”. Actually in R, values are just vectors of length one. R is obsesssed with vectors.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myvec &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>)
myvec +<span class="st"> </span><span class="dv">1</span></code></pre></div>
<pre><code>## [1] 2 3 4</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">myvec +<span class="st"> </span>myvec</code></pre></div>
<pre><code>## [1] 2 4 6</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">length</span>(myvec)</code></pre></div>
<pre><code>## [1] 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">c</span>(<span class="dv">10</span>, myvec)</code></pre></div>
<pre><code>## [1] 10  1  2  3</code></pre>
<p>When we talk about the length of a vector, we are talking about the number of numbers in the vector.</p>
<p>Access elements of a vector with <code>[ ]</code>, for example <code>myvec[1]</code> to get the first element.</p>
<p>We will also encounter vectors of character strings, for example <code>&quot;hello&quot;</code> or <code>c(&quot;hello&quot;,&quot;world&quot;)</code>. Also we will encounter “logical” vectors, which contain <code>TRUE</code> and <code>FALSE</code> values. R also has “factors”, which are categorical vectors, and behave very much like character vectors (think the factors in an experiment).</p>
<section class="challenge panel panel-success">
<div class="panel-heading">
<h3 id="challenge"><span class="glyphicon glyphicon-pencil"></span>Challenge</h3>
</div>
<div class="panel-body">
<p>Sometimes the best way to understand R is to try some examples and see what it does.</p>
<p>What happens when you try to make a vector containing different types, using <code>c( )</code>? Try a few different combinations of types, and try to explain what R is doing.</p>
</div>
</section>
<h2 id="functions">Functions</h2>
<p>R has various functions, such as <code>sum( )</code>. We can get help on a function with, eg <code>?sum</code>.</p>
<pre><code>?sum</code></pre>
<pre><code>sum( c(1,2,3) )</code></pre>
<p>Because R is a language for statistics, it has many built in statistics-related functions. We will also be loading more specialized functions from “libraries” (also known as “packages”).</p>
<p>Functions take some number of <em>arguments</em>. Let’s look at the function <code>rep</code>, which means “repeat”, and which can take a variety of different arguments. In the simplest case, it takes a value and the number of times to repeat that value.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dv">42</span>, <span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] 42 42 42 42 42 42 42 42 42 42</code></pre>
<p>As with many functions in R—which is obsessed with vectors—the thing to be repeated can be a vector with multiple elements.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
<p>So far we have used <em>positional</em> arguments, where R determines which argument is which by the order in which they are given. We can also give arguments by <em>name</em>. For example, the above is equivalent to</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">times=</span><span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="dt">x=</span><span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">times=</span><span class="dv">10</span>)</code></pre></div>
<pre><code>##  [1] 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3 1 2 3</code></pre>
<p>Arguments can have default values, and a function may have many different possible arguments that make it do obscure things. For example, <code>rep</code> can also take an argument <code>each=</code>. It’s typical for a function to be invoked with some number of positional arguments, which are always given, plus some more rarely used arguments, typically given by name.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">each=</span><span class="dv">3</span>)</code></pre></div>
<pre><code>## [1] 1 1 1 2 2 2 3 3 3</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">rep</span>(<span class="kw">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>), <span class="dt">each=</span><span class="dv">3</span>, <span class="dt">times=</span><span class="dv">5</span>)</code></pre></div>
<pre><code>##  [1] 1 1 1 2 2 2 3 3 3 1 1 1 2 2 2 3 3 3 1 1 1 2 2 2 3 3 3 1 1 1 2 2 2 3 3
## [36] 3 1 1 1 2 2 2 3 3 3</code></pre>
<h2 id="lists">Lists</h2>
<p>Vectors contain all the same kind of thing. Try <code>c(42, &quot;hello&quot;)</code>. Lists can contain different kinds of thing.</p>
<p>We generally gives the things in a list names. Try <code>list(num=42, greeting=&quot;hello&quot;)</code>. To access named elements we use <code>$</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">mylist &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dt">num=</span><span class="dv">42</span>, <span class="dt">greeting=</span><span class="st">&quot;Hello, world&quot;</span>)
mylist$greeting</code></pre></div>
<pre><code>## [1] &quot;Hello, world&quot;</code></pre>
<p>This terminology is peculiar to R. Other languages make the same distinction but they may use different words for vectors and lists.</p>
<p>If you’re not sure what sort of object you are dealing with you can use <code>class</code>, or for more detailed information <code>str</code> (structure).</p>
<h2 id="overview-of-data-types">Overview of data types</h2>
<p>We’ve seen several data types in this chapter, and will be seeing two more in the following chapters. This section serves as an overview of data types in R and their typical usage.</p>
<p>Each data type has various ways it can be created and various ways it can be accessed. If we have data in the wrong type, there are also functions to “cast” it to the right type.</p>
<p>This will all make more sense once you have seen these data types in action.</p>
<h3 id="vector">vector</h3>
<p>Vectors contain zero or more elements, <em>all of the same basic type</em> (“mode”).</p>
<p>Elements can be named (<code>names</code>), but often aren’t.</p>
<p>Access single elements: <code>vec[5]</code></p>
<p>Take a subset of a vector: <code>vec[c(1,3,5)]</code> <code>vec[c(TRUE,FALSE,TRUE,FALSE,TRUE)]</code></p>
<p>Vectors come in several different flavours.</p>
<h4 id="numeric-vector">numeric vector</h4>
<p>Numbers. Internally stored as “floating point” so there is a limit to the number of digits accuracy, but this is usually entirely adequate.</p>
<p>Examples: <code>42</code> <code>1e-3</code> <code>c(1,2,0.7)</code></p>
<p>Casting: <code>as.numeric(&quot;42&quot;)</code></p>
<h4 id="character-vector">character vector</h4>
<p>Character strings.</p>
<p>Examples: <code>&quot;hello&quot;</code> <code>c(&quot;Let&quot;,&quot;the&quot;,&quot;computer&quot;,&quot;do&quot;,&quot;the&quot;,&quot;work&quot;)</code></p>
<p>Casting: <code>as.character(42)</code></p>
<h4 id="logical-vector">logical vector</h4>
<p>TRUE or FALSE values.</p>
<p>Examples: <code>TRUE</code> <code>FALSE</code> <code>T</code> <code>F</code> <code>c(TRUE,FALSE,TRUE)</code></p>
<h4 id="factor-vector">factor vector</h4>
<p>A categorical vector, where the elements can be one of several different “levels”. More on these in the chapter on data frames.</p>
<p>Creation/casting: <code>factor(c(&quot;mutant&quot;,&quot;wildtype&quot;,&quot;mutant&quot;), levels=c(&quot;wildtype&quot;,&quot;mutant&quot;))</code></p>
<h3 id="list">list</h3>
<p>Lists contain zero or more elements, of any type. If your data can’t be bundled up in any other type, bundle it up in a list.</p>
<p>List elements can and typically do have names (<code>names</code>).</p>
<p>Access an element: <code>mylist[[5]]</code> <code>mylist[[&quot;elementname&quot;]]</code> <code>mylist$elementname</code></p>
<p>Creation: <code>list(a=1, b=&quot;two&quot;, c=FALSE)</code></p>
<h3 id="matrix">matrix</h3>
<p>A matrix is a two dimensional tabular data structure in which all the elements are the same type. We will typically be dealing with numeric matrices, but it is also possible to have character or logical matrices, etc.</p>
<p>Matrix rows and columns may have names (<code>rownames</code>, <code>colnames</code>).</p>
<p>Access an element: <code>mat[3,5]</code> <code>mat[&quot;arowname&quot;,&quot;acolumnname&quot;]</code></p>
<p>Get a whole row: <code>mat[3,]</code></p>
<p>Get a whole column: <code>mat[,5]</code></p>
<p>Creation: <code>matrix( )</code></p>
<p>Costing: <code>as.matrix( )</code></p>
<h3 id="data.frame">data.frame</h3>
<p>A data frame is a two dimensional tabular data structure in which the columns may have different types, but all the elements in each column must have the same type.</p>
<p>Data frame rows and columns may have names (<code>rownames</code>, <code>colnames</code>). However in typical usage columns are named but rows are not.<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a></p>
<p>Accessing elements, rows, and columns is the same as for matrices, but we can also get a whole column using <code>$</code>.</p>
<p>Creation: <code>data.frame(colname1=values1,colname2=values2,...)</code></p>
<p>Casting: <code>as.data.frame( )</code></p>
<div class="footnotes">
<hr />
<ol>
<li id="fn1"><p>We use the word vector here in the mathematical sense, as used in linear algebra, <em>not</em> in any biological sense, and <em>not</em> in the geometric sense.<a href="#fnref1">↩</a></p></li>
<li id="fn2"><p>For some reason, data frames use partial matching on row names, which can cause some very puzzling bugs.<a href="#fnref2">↩</a></p></li>
</ol>
</div>
        </div>
      </div>
      </article>
      
      <div style="float: right; padding-top: 3em;">
      <a href="index.html">Home</a>
      </div>
    </div>
    <!-- Javascript placed at the end of the document so the pages load faster -->
    <!--
    <script src="http://software-carpentry.org/v5/js/jquery-1.9.1.min.js"></script>
    <script src="css/bootstrap/bootstrap-js/bootstrap.js"></script>
    -->
  </body>
</html>
